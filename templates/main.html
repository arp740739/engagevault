<!-- Ajoutez ceci en haut du fichier, juste après <script> -->
<script>
async function connectWithX() {
    try {
        console.log("Starting X connection..."); // Debug log
        const response = await fetch('/auth/twitter', {
            method: 'GET',
            headers: {
                'Accept': 'application/json',
            }
        });
        
        console.log("Response:", response); // Debug log
        
        const data = await response.json();
        console.log("Data:", data); // Debug log
        
        if (data.success && data.auth_url) {
            window.location.href = data.auth_url;
        } else {
            document.querySelector('.error-message').textContent = 'Error connecting to X';
        }
    } catch (error) {
        console.error('Error:', error);
        document.querySelector('.error-message').textContent = 'Connection error';
    }
}

async function verifyTwitterLink() {
    try {
        const response = await fetch('/verify-twitter-follow', {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
            }
        });
        
        const data = await response.json();
        
        if (data.success) {
            // Afficher les confettis
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 }
            });
            
            document.querySelector('.error-message').textContent = '';
        } else {
            document.querySelector('.error-message').textContent = data.message;
        }
    } catch (error) {
        console.error('Error:', error);
        document.querySelector('.error-message').textContent = 'Verification error';
    }
}
</script>

<!-- Ajoutez la bibliothèque confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

<!-- Le reste du HTML reste identique -->